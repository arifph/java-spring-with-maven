# Heroku from Github
	* Create File Procfile
	* Github web runner
	* Connection with Postgres 
		* Create Postgres
		* Check addons
		* Set Database URL
		* Postgres info
		* SQL postgres
	* Postgres dump on heroku
		* Export 
		* Import
		
	* Reference 
## Create File Procfile
web:    java $JAVA_OPTS -jar target/dependency/webapp-runner.jar --port $PORT target/*.war

## Github web runner
```java
	<plugin>
		<groupId>org.apache.maven.plugins</groupId>
		<artifactId>maven-dependency-plugin</artifactId>
		<version>2.3</version>
		<executions>
			<execution>
				<phase>package</phase>
				<goals><goal>copy</goal></goals>
				<configuration>
					<artifactItems>
						<artifactItem>
							<groupId>com.github.jsimone</groupId>
							<artifactId>webapp-runner</artifactId>
							<version>8.5.23.0</version>
							<destFileName>webapp-runner.jar</destFileName>
						</artifactItem>
					</artifactItems>
				</configuration>
			</execution>
		</executions>
	</plugin>
```

## Connection with Postgres 
### Create Postgres
```js 
heroku addons:create heroku-postgresql:hobby-dev
```

### Check addons 
```js
heroku addons
```

### Set Database URL 
```js
set DATABASE_URL=postgres://$(whoami) 
```
	
### Postgres info
```js
heroku pg:info
```

### SQL to postgres 
```js
heroku pg:psql
```

## Postgres dump on heroku
### Export
```js
Instruction example: 
1. heroku pg:backups:capture
2. heroku pg:backups:download

Ouput example : 
	Getting backup from ebc-development... done, #2
 !    'EPERM': EPERM: operation not permitted, open 'C:\Program Files\PostgreSQL\9.6\bin\latest.dump'
```

### Import and Restore to Heroku 
```js
pg_restore --verbose --clean --no-acl --no-owner -h host_server -U username -d database_name "C:\Users\myremote\Documents\mydb.sql"
pg_restore: connecting to database for restore
Password: xxx
``` 

## Reference
https://github.com/heroku/devcenter-webapp-runner
https://devcenter.heroku.com/articles/heroku-postgresql#local-setup
https://devcenter.heroku.com/articles/heroku-postgres-import-export#import